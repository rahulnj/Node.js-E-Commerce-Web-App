<body id="about_body">


    <section class="section about-section gray-bg" id="about">
        <div class="container">
            <div class="row align-items-center flex-row-reverse">
                <div class="col-lg-6">
                    <div class="about-text go-to">
                        <h3 class="dark-color">{{userDetails.username}}</h3>
                        <div class="row about-list">
                            <div class="col-md-6">
                                <div class="media">
                                    <p>Email : <span>{{userDetails.mail}}</span></p>
                                    <button class="btn mr-2 pl-1 btn-light"><i class="fa fa-pencil-square-o pl-2 "
                                            onclick="editEmail()"></i></button>
                                </div>
                                <p id="mail-message" class="text-danger"></p>
                            </div>
                            <div class="col-md-6">
                                <div class="media">
                                    <p>Phone : <br> <span>{{userDetails.phone}}</span></p>
                                    <button class="btn mr-2 pl-1 btn-light"><i class="fa fa-pencil-square-o pl-2 "
                                            onclick="editPhone()"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {{!-- <div class="col-lg-6">
                    <div class="about-avatar">
                        <img src="/img/bg-img/avatar7.png" title="" alt="">
                    </div>
                </div> --}}
                <aside class="col-lg-4">
                    <figure class="text-lg-center">
                        <img class="img-lg mb-3 img-avatar" src="/img/core-img/avatar1.jpg" alt="User Photo">
                        <figcaption>
                            {{!-- <a class="btn btn-outline-primary" href="#">
                                <i class="icons material-icons md-backup"></i> Upload
                            </a> --}}
                        </figcaption>
                    </figure>
                </aside> <!-- col.// -->
            </div>
            <div class="counter">
                <div class="row">
                    <div class="col-6 col-lg-4">
                        {{#if Exist}}
                        <div class="count-data text-center">
                            <i class="fa fa-lock" aria-hidden="true"></i>
                            <a style="cursor: pointer;" onclick="createPassword()">
                                <p class="m-0px font-w-600">Create password</p>
                            </a>
                        </div>
                        {{else}}
                        <div class="count-data text-center">
                            <i class="fa fa-lock" aria-hidden="true"></i>
                            <a style="cursor: pointer;" onclick="changePassword()">
                                <p class="m-0px font-w-600">Change password</p>
                            </a>
                        </div>
                        {{/if}}
                    </div>
                    <div class="col-6 col-lg-4">
                        <div class="count-data text-center">
                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                            <a href="/address/?profile=true">
                                <p class="m-0px font-w-600">+ Address</p>
                            </a>
                        </div>
                    </div>
                    <div class="col-6 col-lg-4">
                        <div class="count-data text-center">
                            <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                            <a href="/myorders">
                                <p class="m-0px font-w-600">View Orders</p>
                            </a>
                        </div>
                    </div>
                    <div class="col-6 col-lg-4">
                        <div class="count-data text-center">

                            {{!-- <h6 class="count h2" data-to="190" data-speed="190">190</h6>
                            <p class="m-0px font-w-600">Telephonic Talk</p> --}}
                        </div>

                    </div>
                </div>
            </div>
            <div class="counter mt-2 ">
                <div class="row ">
                    <div class="col-6 col-lg-4">
                        <h6>Address</h6>
                        {{!-- <ul class="list-group">
                            {{#each addressDetails}}
                            <li class="list-group-item ">
                                <div class="row">
                                    <p>{{this.address.fullname}} {{ this.address.address}}
                                        {{this.address.city}} {{this.address.place}} {{this.address.pincode}}
                                        {{this.address.phone}}</p>
                                </div>
                                <div> <button type="button" class="btn mr-2 pl-1 btn-light"
                                        onclick="deleteAddress('{{this._id}}','{{this.user}}','{{this.address.address}}')"><i
                                            class="fa fa-trash-o ml-2 text-white-60"></i></button>
                                    <button type="button" class="btn mr-2 pl-1 btn-light"
                                        onclick="deleteAddress('{{this._id}}','{{this.user}}','{{this.address.address}}')"><i
                                            class="fa fa-pencil-square-o ml-2 text-white-60"></i></button>
                                </div>
                            </li>
                            {{/each}}
                        </ul> --}}
                        {{#each addressDetails}}
                        <div class="row mt-4">
                            <div class="col">
                                <div class="card card-2">
                                    <div class="card-body">
                                        <div class="media">
                                            <div class="sq align-self-center ">
                                            </div>
                                            <div class="media-body my-auto text-left">
                                                <div class="row my-auto flex-column flex-md-row">
                                                    <div class="col-auto my-auto ">
                                                        <p class="mb-0">{{this.address.fullname}}
                                                            <br>{{ this.address.address}} <br>
                                                            {{this.address.city}} <br> {{this.address.place}} <br>
                                                            {{this.address.pincode}}
                                                        </p>
                                                    </div>
                                                    <div class="col-auto my-auto ml-2">
                                                        <button type="button" class="btn mr-2 pl-1 btn-light"
                                                            onclick="deleteAddress('{{this._id}}','{{this.user}}','{{this.address.address}}')"><i
                                                                class="fa fa-trash-o ml-2 text-white-60"></i></button>
                                                        {{!-- <button type="button" class="btn mr-2 pl-1 btn-light"
                                                            onclick="editAddress('{{this._id}}','{{this.address.address}}')"><i
                                                                class="fa fa-pencil-square-o ml-2 text-white-60"></i></button>
                                                        --}}
                                                        <a href="/editaddress/{{this._id}}/{{this.address.address}}">
                                                            <button type="button" class="btn mr-2 pl-1 btn-light"><i
                                                                    class="fa fa-pencil-square-o ml-2 text-white-60"></i></button></a>
                                                    </div>
                                                    <div class="col my-auto ">
                                                    </div>
                                                    <div class="col">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

<script>
    function deleteAddress(addId, userId, add) {

        console.log(add)
        $.ajax({
            url: '/deleteaddress',
            data: {
                add: addId,
                user: userId,
                address: add
            },
            method: 'post',
            success: (response) => {
                if (response.status) {
                    // alert("Deleted")
                    window.location.reload()
                } else {

                }
            }
        })
    }






</script>